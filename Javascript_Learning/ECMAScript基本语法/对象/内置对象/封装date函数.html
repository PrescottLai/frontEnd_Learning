<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date封装</title>
    <script>
        //1.格式化  //2.倒计时实时计算

        //获取格式化输出：“现在是：2022年09月22日 星期四 19时29分00秒”
        //获取格式化输出：“现在是：2022年09月22日 星期四 19:29:00”

        function getDate( type ) {
            var time = new Date();
            var year = time.getFullYear();
            var month = ( time.getMonth() + 1 ) < 10 ? '0' + ( time.getMonth() + 1 ) : time.getMonth() + 1;
            var date = time.getDate() < 10 ? '0' + time.getDate() : time.getDate();
            var arr = [ '星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六' ];
            var day = arr[ time.getDay() ];
            var hour = time.getHours() < 10 ? '0' + time.getHours() : time.getHours();
            var min = time.getMinutes() < 10 ? '0' + time.getMinutes() : time.getMinutes();
            var sec = time.getSeconds() < 10 ? '0' + time.getSeconds() : time.getSeconds();
            if ( type == 'time' ) {
                return '现在是：' + year + '年' + month + '月' + date + '日 ' + day + ' ' + hour + '时' + min + '分' + sec + '秒';
            }
            if ( type == 'date' ) {
                return '现在是：' + year + '年' + month + '月' + date + '日 ' + day;
            }
            // if ( type == 'time1' ) {
            //     return '现在是：' + year + '年' + month + '月' + date + '日 ' + day + ' ' + hour + ':' + min + ':' + sec;
            // }
        }
        var recentTime = getDate( type = 'date' ); //为了方便阅读，写上 type = 1 确定格式
        console.log( recentTime );
        var recentTime = getDate( type = 'time' );
        console.log( recentTime );

        //倒计时实时计算
        //核心算法∶输入的时间减去现在的时间就是剩余的时间，即倒计时，但是不能拿着时分秒相减，比如05分减去25分，结果会是负数的。
        //用时间戳来做。用户输入时间总的毫秒数减去现在时间的总的毫秒数，得到的就是剩余时间的毫秒数。
        //把剩余时间总的毫秒数转换为天、时、分、秒（时间戳转换为时分秒）转换公式如下∶
        //● d=parseInt（总秒数/60/60/24）//计算天数
        //● h=parseInt（总秒数/60/60%24）//计算小时
        //● m=parseInt（总秒数/60%60）   //计算分数
        //● s=parseInt（总秒数%60）      //计算当前秒数
        function countDown( futureTime ) {
            var nowTime = +new Date();
            var futureTime = +new Date( futureTime );
            // var totalMilSec = futureTime - nowTime;
            var totalSec = ( futureTime - nowTime ) / 1000;
            var s = parseInt( totalSec % 60 ) < 10 ? '0' + parseInt( totalSec % 60 ) : parseInt( totalSec % 60 );
            var m = parseInt( totalSec / 60 % 60 ) < 10 ? '0' + parseInt( totalSec / 60 % 60 ) : parseInt( totalSec / 60 % 60 );
            var h = parseInt( totalSec / 60 / 60 % 24 ) < 10 ? '0' + parseInt( totalSec / 60 / 60 % 24 ) : parseInt( totalSec / 60 / 60 % 24 );
            var d = parseInt( totalSec / 60 / 60 / 24 ) < 10 ? '0' + parseInt( totalSec / 60 / 60 / 24 ) : parseInt( totalSec / 60 / 60 / 24 );
            if ( totalSec > 0 ) {
                return '倒计时剩余：' + d + '天' + h + '时' + m + '分' + s + '秒';
            } else {
                return '日期时间输入有误，请重新输入！'
            }

        }

        var lastDay = countDown( '2023-9-22 20:29:00' );
        console.log( lastDay );
        console.log( new Date() );

    </script>
</head>

<body>

</body>

</html>